<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delta Farce - Arma Reforger HOTAS Configurator</title>
    <link rel="stylesheet" href="style.css">

    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8117946503724556"
     crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Delta Farce - Arma Reforger HOTAS Configurator</h1>
            <p class="subtitle">Configure your joystick inputs for Arma Reforger</p>
        </header>

        <!-- Community Section -->
        <div class="community-section">
            <div class="community-box">
                <h3>Join Our Community</h3>
                <div class="community-links">
                    <a href="https://discord.deltafarce.win" target="_blank" rel="noopener noreferrer" class="community-link discord-link">
                        <span class="icon">üí¨</span>
                        <span>Join our Discord</span>
                    </a>
                    <a href="https://github.com/jscrobinson/reforger_hotas_config" target="_blank" rel="noopener noreferrer" class="community-link github-link">
                        <span class="icon">‚öôÔ∏è</span>
                        <span>Contribute on GitHub</span>
                    </a>
                    <div class="server-info">
                        <span class="icon">üéÆ</span>
                        <span>Find our servers: Search <strong>Delta Farce</strong> in the Reforger server browser</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Section -->
        <div class="about-section">
            <h2>Why Use This Tool?</h2>
            <div class="about-content">
                <p>Arma Reforger only has built-in support for two specific joystick models. For all other HOTAS (Hands On Throttle And Stick) setups and joysticks, you need to manually create and edit configuration files - a tedious and error-prone process.</p>

                <p><strong>This tool simplifies everything:</strong> It detects your connected joysticks, walks you through binding each flight control action, and generates a ready-to-use configuration file that you can drop directly into your game folder.</p>
            </div>

            <h3>How to Use</h3>
            <div class="instructions">
                <ol class="instruction-list">
                    <li>
                        <strong>Connect Your Joystick/HOTAS</strong>
                        <p>Plug in your controller and press any button. It should appear in the "Connected Joysticks" section above.</p>
                    </li>
                    <li>
                        <strong>Start Configuring</strong>
                        <p>Click "Start Configuring" and follow the prompts. For each action, press the button or move the axis you want to assign, then press SPACE to confirm.</p>
                    </li>
                    <li>
                        <strong>Use HAT Mode for Tricky Controls</strong>
                        <p>If HAT switches or certain axes aren't detecting properly, enable "HAT Mode" for simplified detection.</p>
                    </li>
                    <li>
                        <strong>Download Your Config</strong>
                        <p>When finished, click "Download Config" to save your configuration file.</p>
                    </li>
                    <li>
                        <strong>Install the Config</strong>
                        <p>Copy the downloaded .conf file to your game's customInputConfigs folder:</p>
                        <code>%USERPROFILE%\Documents\My Games\ArmaReforger\profile\.save\settings\customInputConfigs</code>
                        <p>If the folder doesn't exist, create it. The file needs to be in the .save directory for Reforger to detect it.</p>
                    </li>
                    <li>
                        <strong>Activate in Reforger</strong>
                        <p>Launch Reforger and go to <strong>Options ‚Üí Controls</strong>. At the top of the controls menu, you'll see a dropdown to select your custom input config. Choose your newly created config file.</p>
                        <p><strong>Pro tip:</strong> You can keep Reforger running while you update your config file! Just modify and save the file, then reselect it from the dropdown in the Controls menu to reload your changes. This makes it easy to tweak bindings without restarting the game.</p>
                    </li>
                </ol>
            </div>

            <div class="tips-box">
                <h4>üí° Pro Tips</h4>
                <ul>
                    <li>You can skip actions you don't need by clicking "Skip"</li>
                    <li>Use the action list on the right to jump to specific actions</li>
                    <li>You can load an existing config file and modify it instead of starting from scratch</li>
                    <li>Test your bindings in-game and come back to adjust if needed</li>
                </ul>
            </div>
        </div>

        <!-- Ad: Top Banner -->
        <div class="ad-container">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-8117946503724556"
                 data-ad-slot="8517600527"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <div class="status-section">
            <div class="joystick-status">
                <h2>Connected Joysticks</h2>
                <div id="joystick-list">
                    <p class="no-joysticks">No joysticks detected. Connect a joystick and press any button.</p>
                </div>
            </div>
        </div>

        <div class="config-section">
            <div class="config-controls">
                <button id="load-config-btn" class="btn btn-secondary">Load Existing Config</button>
                <input type="file" id="config-file-input" accept=".conf" style="display: none;">
                <button id="start-config-btn" class="btn btn-primary">Start Configuring</button>
                <button id="download-config-btn" class="btn btn-success" disabled>Download Config</button>
            </div>
            <div class="save-location-hint">
                <p><strong>Save Location:</strong> %USERPROFILE%\Documents\My Games\ArmaReforger\profile\.save\settings\customInputConfigs</p>
            </div>
        </div>

        <div class="main-content">
            <div class="current-action-section" id="current-action-section" style="display: none;">
                <h2>Current Action</h2>
                <div class="action-display">
                    <div class="action-name" id="current-action-name">-</div>
                    <div class="action-info" id="action-info">
                        <span class="importance-indicator" id="importance-indicator"></span>
                        <span class="action-description" id="action-description">-</span>
                        <span class="hardware-hint" id="hardware-hint"></span>
                    </div>
                    <div class="action-prompt">Press any button or move any axis</div>
                    <div class="action-hint">Use ‚Üë‚Üì arrows or click to navigate actions ‚Ä¢ Enable HAT Mode for difficult HAT switches</div>
                    <div class="input-detection-container">
                        <div class="input-detected" id="input-detected">
                            <div class="waiting-message">Waiting for input...</div>
                        </div>
                        <div class="confirmation-prompt" id="confirmation-prompt" style="display: none;">
                            <div class="confirm-icon">‚úì</div>
                            <div class="confirm-text">Press <kbd>SPACE</kbd> to confirm</div>
                        </div>
                    </div>
                    <div class="hat-mode-control">
                        <label class="hat-mode-label">
                            <input type="checkbox" id="hat-mode-checkbox">
                            <span>HAT Mode (simplified axis detection)</span>
                        </label>
                    </div>

                    <div class="action-controls">
                        <button id="skip-action-btn" class="btn btn-secondary">Skip</button>
                        <button id="clear-action-btn" class="btn btn-warning">Clear Binding</button>
                        <button id="resume-btn" class="btn btn-primary" style="display: none;">Resume from Action <span id="resume-action-number"></span></button>
                    </div>

                    <!-- Joystick Visualization -->
                    <div class="joystick-visualization" id="joystick-visualization">
                        <div class="viz-header">
                            <h3>Live Input Monitor</h3>
                            <span class="viz-device-name" id="viz-device-name">No device detected</span>
                        </div>
                        <div class="viz-content">
                            <div class="viz-axes" id="viz-axes">
                                <!-- Axes will be populated dynamically -->
                            </div>
                            <div class="viz-buttons" id="viz-buttons">
                                <!-- Buttons will be populated dynamically -->
                            </div>
                        </div>
                    </div>
                    
                </div>
                <div class="progress">
                    <div class="progress-text" id="progress-text">0 / 0</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                </div>
            </div>

            <div class="actions-list-section">
                <h2>Actions</h2>
                <div class="filter-controls">
                    <button class="filter-btn active" data-filter="all">All (<span id="count-all">0</span>)</button>
                    <button class="filter-btn" data-filter="configured">Configured (<span id="count-configured">0</span>)</button>
                    <button class="filter-btn" data-filter="unconfigured">Unconfigured (<span id="count-unconfigured">0</span>)</button>
                </div>
                <div id="actions-list" class="actions-list">
                    <!-- Actions will be populated here -->
                </div>
            </div>
        </div>

        <!-- Ad: Bottom Banner -->
        <div class="ad-container ad-bottom">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-8117946503724556"
                 data-ad-slot="8517600527"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <!-- Footer -->
        <footer class="page-footer">
            <p>
                <a href="https://github.com/jscrobinson/reforger_hotas_config" target="_blank" rel="noopener noreferrer">
                    Arma Reforger HOTAS Configurator
                </a>
                <span class="version-separator">‚Ä¢</span>
                <span class="version-info">Version: <code>9a2010e</code></span>
            </p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
